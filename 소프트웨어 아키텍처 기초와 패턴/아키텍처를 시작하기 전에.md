# 아키텍처를 시작하기 전에

## 소프트웨어 아키텍처란

- 소프트웨어 개발 관점에서 아키텍처는 소프트웨어의 전체적인 구조를 잡아주는 `설계도`이다.   

- 좋은 아키텍처는 사람이 세부적인 코드를 일일이 다 보지 않아도, 일관된 코드 구조로 흐름을 쉽게 유추할 수 있도록 한다.  
- 개발을 하다보면 코드를 어떻게 분리하고 모듈화할지, 객체를 어떻게 설계할지 고민하곤 하는데, **아키텍처는 이러한 고민에 방향을 제시해주는 일종의 지침**이다.

## 아키텍처가 없다면


```
project.py
    dependency.py
    model.py
    main.py
```
위 프로젝트 구조는 아키텍처 없이 개발을 진행한 프로젝트 구조의 예시이다. 위처럼 아키텍처가 없는 프로젝트들은 다음과 같은 문제점이 있다. 
- 본인이 작성한 코드나 모듈을 프로젝트 어디에 두어야 할지 모른다. -> 고민하거나 결정하는 데 시간이 소요됨
- 본인이 생각한 기준과 다른 팀원이 생각한 기준이 다를 수 있기 때문에 모듈 위치나 이름이 일관성 없게 됨.
- 폴더, 파일 간의 의존 관계가 복잡해지면서 컴포넌트를 나누기가 힘들어짐.
- 팀에 새로 들어온 사람이 프로젝트 코드를 보면, 어디서부터 어떻게 봐야 할지 감이 오지 않는다. 전체적인 흐름과 설계를 이해하는 데 시간이 오래걸린다.  

아키텍처 없이 지속해서 개발을 하다 보면 어느 순간 프로젝트 전반에 코드가 덕지덕지 붙어있거나, 산발적으로 로직이 흩어져있는 것을 느끼게 된다.   
이 시점부터는 새로운 기능을 개발하는데 시간이 더 오래 걸리기 시작한다. 이는 나중에 리팩토링을 할 때 더 큰 비용을 지불하게 만든다.


## 아키텍처가 해주는 것

아래 구조는 나름의 이키텍처를 가지고 있는 프로젝트 구조이다. 
```
project/
  main.py
  entry_point/
    cli.py
  use_cases/
    train.py
    predict.py
  model/
    image_classifier.py
```
- 먼저 `entry_point/cli.py` 를 통해 이 애플리케이션은 `CLI (Command Line Interface)`를 제공해주는 것을 알 수 있다.
- `use_cases/` 내에 있는 모듈들을 통해, 이 애플리케이션에 `train`과 `predict`기능이 있음을 알 수 있다.
- `model/image_classifier` 를 통해, 이 애플리케이션이 이미지 분류 모델과 관련한 내용임을 알 수 있다.

이처럼 아키텍처를 잘 적용한다면 다음과 같은 효과를 얻을 수 있다.
- 아키텍처는 시스템에 규칙을 만든다.
- 소프트웨어의 구성을 한 눈에 파악하기 좋다.
- 좋은 아키텍처는 소프트웨어의 테스트를 쉽게 만들 수 있도록 돕는다.

## 트레이드 오프

아키텍처의 도인은 항상 필요하고 항상 좋은 걸까?
위에서 아키텍처의 장점을 말했지만, 사실 아키텍처를 도입하면 다음과 같은 어려운 점들이 따라온다.  

- 초반에 아키텍처를 고민하고 결정하는 시간이 필요하다.
- 코드를 작성하거나 읽어야 할 때 알아야 될 규칙이 늘어난다.  
- 팀원 전체가 프로젝트의 아키텍처 패턴에 익숙해야 한다.
- 전반적으로 작성해야 할 코드의 양이 늘어난다.  

프로젝트 초반부에 당장 세세한 아키텍처를 도입하는 것은 과할 수 있다. 문제 상항과 앞으로의 프로젝트 방향성이 당장 정해지지 않았다면, 먼저 기본적인 작업 흐름을 유지하면서 개발을 하고 나중에 본격적으로 아키텍처 도입을 고려해보는 것도 하나의 방법이다. 

## Tips

- 아키텍처를 처음에 쉽게 이해하려면 `의존성` 관계에 집중하자. 결국 컴포넌트별로 역할을 명확하게 나누고 의존 관계를 분명히 하는 것이 핵심이다.

- 본인이 자주 사용하는 언어 프레임워크와 아키텍처 패턴을 구글링해서 다른 사람들은 어떻게 구현하는지 알아보고 적용해보자.
    - ex) react with layered architecture, spring with clean architecture
